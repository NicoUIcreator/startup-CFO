<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>TSCFO ‚Üí XYZ Tech Solutions | Financing & ROI Proposal</title>
<meta name="description" content="Executive proposal from The Startup CFO for XYZ Tech Solutions: blended financing, ROI impact, dilution minimization, and execution roadmap." />
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
<link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<!-- Favicon (inline SVG) -->
<link rel="icon" type="image/svg+xml" href='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><defs><linearGradient id="g" x1="0" x2="1" y1="0" y2="1"><stop stop-color="%236aa2ff"/><stop offset="1" stop-color="%237cf7d4"/></linearGradient></defs><rect width="64" height="64" rx="14" fill="url(%23g)"/><path d="M16 32a16 16 0 1132 0M16 32h16v16" fill="none" stroke="white" stroke-width="6" stroke-linecap="round"/></svg>'/>

<style>
  :root{
    --bg:#0b0e13; --surface:#0e131d; --card:#101827; --muted:#8da0c6; --text:#e9eefb;
    --accent:#6aa2ff; --accent-2:#7cf7d4; --warn:#ffd36a; --ok:#79f2c0;
    --ring:0 0 0 2px rgba(106,162,255,.35);
    --radius:16px; --shadow:0 22px 42px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.03);
  }
  /* Light theme overrides */
  [data-theme="light"]{
    --bg:#f5f7fb; --surface:#f8faff; --card:#ffffff; --muted:#5b6e95; --text:#0b0e13;
    --accent:#3a78ff; --accent-2:#18d6b3; --warn:#b07a00; --ok:#178f70;
    --ring:0 0 0 2px rgba(58,120,255,.35);
    --shadow:0 12px 28px rgba(9,14,19,.12), inset 0 1px 0 rgba(0,0,0,.04);
  }

  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--surface),var(--bg));color:var(--text);font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
  a{color:var(--accent);text-decoration:none}
  a:hover{text-decoration:underline}
  .wrap{max-width:1180px;margin:0 auto;padding:20px}

  header{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:10px 0;position:sticky;top:0;background:linear-gradient(180deg,rgba(11,14,19,.92),rgba(11,14,19,.82));backdrop-filter:blur(8px);z-index:10}
  [data-theme="light"] header{background:linear-gradient(180deg,rgba(255,255,255,.9),rgba(255,255,255,.85))}
  .brand{display:flex;gap:12px;align-items:center}
  .logo{width:40px;height:40px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:grid;place-items:center;box-shadow:0 10px 30px rgba(106,162,255,.35)}
  .title h1{font-size:18px;margin:0}
  .title p{margin:2px 0 0;color:var(--muted);font-size:12px}
  nav{display:flex;gap:10px;align-items:center}
  .nav-link{border:1px solid #1e2740;background:#0e1421;padding:10px 12px;border-radius:12px;color:#e9eefb;font-weight:600;font-size:13px;cursor:pointer;transition:transform .2s, box-shadow .2s}
  .nav-link:hover{transform:translateY(-1px);box-shadow:var(--ring)}
  [data-theme="light"] .nav-link{background:#eef2ff;border-color:#d4dcff;color:#0b0e13}

  .hamburger{display:none;cursor:pointer;width:42px;height:42px;border-radius:12px;border:1px solid #1e2740;background:#0e1421;align-items:center;justify-content:center}
  .hamburger svg{pointer-events:none}
  [data-theme="light"] .hamburger{background:#eef2ff;border-color:#d4dcff}
  .mobile-menu{display:none;position:absolute;top:64px;right:20px;background:var(--surface);border:1px solid #1b2744;border-radius:14px;box-shadow:var(--shadow);padding:8px;width:220px}
  .mobile-menu a{display:block;padding:10px 12px;border-radius:10px;color:var(--text)}
  .mobile-menu a:hover{background:#0f1726;color:#e9eefb}
  [data-theme="light"] .mobile-menu a:hover{background:#eef2ff;color:#0b0e13}
  @media(max-width:900px){ nav{display:none} .hamburger{display:flex} }

  .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:14px;margin-top:14px}
  .card{grid-column:span 12;background:linear-gradient(180deg,#0f1420,#111827);border:1px solid #1b2340;border-radius:var(--radius);padding:16px;box-shadow:var(--shadow);transform:translateZ(0);transition:transform .25s ease, box-shadow .25s ease}
  [data-theme="light"] .card{background:#fff;border-color:#e6e9f6}
  .card:hover{transform:translateY(-2px)}
  @media(min-width:920px){ .span-4{grid-column:span 4} .span-6{grid-column:span 6} .span-8{grid-column:span 8}}
  .section-title{display:flex;align-items:center;gap:10px;margin:0 0 8px}
  .section-title svg{opacity:.9}
  .note{font-size:13px;color:var(--muted)}
  .kpis{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
  @media(max-width:920px){.kpis{grid-template-columns:repeat(2,1fr)}}
  .kpi{background:linear-gradient(180deg,#101a2a,#0e1524);border:1px solid #1c2642;border-radius:14px;padding:14px;transition:transform .25s ease, box-shadow .25s ease}
  [data-theme="light"] .kpi{background:#f8faff;border-color:#e6e9f6}
  .kpi h3{margin:0 0 2px;font-size:12px;color:var(--muted);font-weight:600}
  .kpi .val{font-size:22px;font-weight:700;margin:0 0 6px}
  .kpi .trend{font-size:12px;color:#9bd7c9}
  [data-theme="light"] .kpi .trend{color:#178f70}
  .row{display:flex;align-items:center;gap:12px;flex-wrap:wrap}
  .pill{display:inline-flex;align-items:center;gap:8px;border:1px solid #203057;background:#0b1220;padding:6px 10px;border-radius:999px;font-size:12px;color:var(--muted)}
  [data-theme="light"] .pill{background:#eef2ff;border-color:#d4dcff;color:#5b6e95}
  ol{margin:8px 0 0 18px}
  .footer{margin:26px 0 10px;color:var(--muted);font-size:12px;text-align:center}

  .btn{display:inline-flex;align-items:center;gap:10px;border:1px solid #1e2740;background:#0e1421;padding:12px 14px;border-radius:12px;color:#e9eefb;font-weight:700;cursor:pointer;transition:transform .2s, box-shadow .2s}
  .btn:hover{transform:translateY(-1px);box-shadow:var(--ring)}
  [data-theme="light"] .btn{background:#eef2ff;border-color:#d4dcff;color:#0b0e13}

  .theme-toggle{display:inline-flex;align-items:center;gap:8px;margin-left:8px}
  .theme-toggle button{border:1px solid #1e2740;background:#0e1421;color:#e9eefb;border-radius:12px;padding:8px 10px;font-weight:700;cursor:pointer}
  [data-theme="light"] .theme-toggle button{background:#eef2ff;border-color:#d4dcff;color:#0b0e13}

  /* Motion accessibility */
  @media (prefers-reduced-motion: reduce){ *{transition:none !important; animation:none !important} }
  :focus-visible{outline:none; box-shadow:var(--ring)}
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <button class="hamburger" aria-label="Open menu" aria-controls="mobileMenu" aria-expanded="false">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
        </button>
        <div class="logo" aria-hidden="true">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
            <path d="M4 12a8 8 0 1116 0" stroke="white" stroke-width="2" stroke-linecap="round"/>
            <path d="M4 12h8v8" stroke="white" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </div>
        <div class="title">
          <h1>TSCFO ‚Üí XYZ Tech Solutions</h1>
          <p>Blended financing ¬∑ ROI & dilution optimization ¬∑ Execution roadmap</p>
        </div>
      </div>
      <nav aria-label="Primary">
        <a class="nav-link" href="#hero">Intro</a>
        <a class="nav-link" href="#overview">Executive Summary</a>
        <a class="nav-link" href="#value">Value Roadmap</a>
        <a class="nav-link" href="#charts">Dashboards</a>
        <a class="nav-link" href="#actions">Next Steps</a>
      </nav>
      <div class="theme-toggle">
        <button id="toggleTheme" aria-pressed="false" aria-label="Toggle light/dark theme">üåô / ‚òÄÔ∏è</button>
      </div>
      <div id="mobileMenu" class="mobile-menu" role="menu" aria-hidden="true">
        <a href="#hero" role="menuitem">Intro</a>
        <a href="#overview" role="menuitem">Executive Summary</a>
        <a href="#value" role="menuitem">Value Roadmap</a>
        <a href="#charts" role="menuitem">Dashboards</a>
        <a href="#actions" role="menuitem">Next Steps</a>
      </div>
    </header>

    <!-- HERO -->
    <section id="hero" class="card" tabindex="0" style="display:grid;gap:10px">
      <div class="section-title">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M4 12h16M4 6h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
        <h2 style="margin:0">Opportunity to Partner</h2>
      </div>
      <p class="note">
        XYZ Tech Solutions is preparing a <strong>‚Ç¨20M Series A</strong> while managing variable revenues and long sales cycles.
        The Startup CFO (TSCFO) proposes a <strong>blended financing strategy</strong> that minimizes dilution and extends runway,
        paired with disciplined FP&A and controlling to unlock higher ROI from the capital raised.
      </p>
      <div class="row">
        <a class="btn" href="#charts">View Dashboards</a>
        <a class="btn" href="#actions">See Execution Plan</a>
      </div>
    </section>

    <!-- EXECUTIVE SUMMARY -->
    <section id="overview" class="card" tabindex="0">
      <div class="section-title">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 2v20M2 12h20" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
        <h2 style="margin:0">Executive Summary</h2>
      </div>
      <div class="kpis" style="margin-top:12px">
        <div class="kpi" tabindex="0">
          <h3>Non-dilutive potential</h3>
          <p class="val">‚Ç¨0.5‚Äì3.0M</p>
          <p class="trend">Stack grants (NEOTEC/EIC) + tax incentives</p>
        </div>
        <div class="kpi" tabindex="0">
          <h3>Dilution saved</h3>
          <p class="val">8‚Äì15 pp</p>
          <p class="trend">Grant/credit before equity round</p>
        </div>
        <div class="kpi" tabindex="0">
          <h3>Runway extension</h3>
          <p class="val">+6‚Äì12 mo</p>
          <p class="trend">RBF + bank lines smooth cash cycles</p>
        </div>
        <div class="kpi" tabindex="0">
          <h3>ROI uplift</h3>
          <p class="val">+18‚Äì35%</p>
          <p class="trend">FP&A, cost control, pricing, WC</p>
        </div>
      </div>
      <p class="note" style="margin-top:10px">
        Figures are illustrative for planning and discussion‚Äîfinal values depend on eligibility, traction, and timing.
      </p>
    </section>

    <!-- VALUE ROADMAP -->
    <section id="value" class="card" tabindex="0">
      <div class="section-title">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M6 18l6-12 6 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
        <h2 style="margin:0">Value Roadmap (TSCFO ‚Üí XYZ)</h2>
      </div>
      <ol>
        <li><strong>Diagnostic (2 weeks)</strong> ‚Äî FP&A, controlling, tax/legal, funding readiness. Define KPI set & cash model.</li>
        <li><strong>Blended financing design</strong> ‚Äî Sequence grants (NEOTEC/EIC), ENISA/public, bank/alt credit, RBF; then equity.</li>
        <li><strong>Execution</strong> ‚Äî Grant packs, investor materials, bank/RBF negotiation, KPI dashboards & reporting cadence.</li>
        <li><strong>Scale discipline</strong> ‚Äî Rolling cashflow, pricing/margin analytics, board reporting, incentive plans.</li>
      </ol>
      <div class="row" style="margin-top:10px">
        <span class="pill">Deliverables: Financial model ¬∑ Runway plan ¬∑ Grant dossiers ¬∑ Investor deck ¬∑ Reporting suite</span>
      </div>
    </section>

    <!-- DASHBOARDS -->
    <section id="charts" class="card" tabindex="0">
      <div class="row" style="justify-content:space-between">
        <div class="section-title">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M4 18V6M10 18V10M16 18V4M22 20H2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
          <h2 style="margin:0">Dashboards ‚Äî Financing & ROI</h2>
        </div>
        <!-- Scenario selector here -->
        <div class="row" role="group" aria-label="Scenario">
          <label class="note" for="dataset">Scenario:</label>
          <select id="dataset" class="btn" style="padding:10px 12px;border-radius:12px">
            <option value="xyz_saas">XYZ ‚Äî SaaS Enterprise</option>
            <option value="xyz_deep">XYZ ‚Äî Deep Analytics</option>
            <option value="xyz_mix">XYZ ‚Äî Hybrid GTM</option>
          </select>
        </div>
      </div>

      <div class="row" style="align-items:stretch;margin-top:10px">
        <div style="flex:1;min-width:260px">
          <canvas id="mixChart" height="190" aria-label="Funding Mix"></canvas>
          <p class="note">Funding Mix (%): composition designed to minimize dilution while maintaining speed.</p>
        </div>
        <div style="flex:1;min-width:260px">
          <canvas id="roiChart" height="190" aria-label="ROI Levers"></canvas>
          <p class="note">ROI Levers: relative contribution to profit uplift within 12‚Äì18 months.</p>
        </div>
      </div>

      <div class="row" style="align-items:stretch;margin-top:10px">
        <div style="flex:1;min-width:260px">
          <canvas id="runwayChart" height="220" aria-label="Runway Extension (Horizontal)"></canvas>
          <p class="note">Runway (months): base vs. TSCFO blended plan. Target line at 18 months for healthy fundraising cycles.</p>
        </div>
      </div>
    </section>

    <!-- NEXT STEPS -->
    <section id="actions" class="card" tabindex="0">
      <div class="section-title">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M5 12h14M5 6h14M5 18h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
        <h2 style="margin:0">Next Steps</h2>
      </div>
      <ol>
        <li>Workshop (60‚Äì90 min): confirm objectives, eligibility, and timing; align on KPIs and investor narrative.</li>
        <li>Kick-off (Week 1): finalize cash model; submit first public funding dossier; open bank/RBF dialogues.</li>
        <li>Weeks 2‚Äì6: deliver grant packs & investor materials; negotiate terms; implement reporting cadence.</li>
        <li>Board pack (end of month 2): funding pipeline status, runway impact, ROI plan, and governance cadence.</li>
      </ol>
      <div class="row">
        <a class="btn" href="#hero">Back to Top</a>
      </div>
    </section>

    <div class="footer">
      ¬© The Startup CFO ‚Äî Proposal for XYZ Tech Solutions. ¬∑ Reference links available on request: EIC Accelerator ¬∑ CDTI/NEOTEC ¬∑ ENISA ¬∑ RBF providers (Capchase / Ritmo).
    </div>
  </div>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js" crossorigin="anonymous"></script>
<script>
  /* ------------------------------------------
   * 1) Declare chart refs at the very top
   * ------------------------------------------ */
  let mixChart, roiChart, runwayChart;

  /* ---------- Theme handling ---------- */
  const root = document.documentElement;
  const themeBtn = document.getElementById('toggleTheme');

  function getSavedTheme(){
    return localStorage.getItem('theme') ||
           (window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');
  }
  function applyTheme(theme){
    root.setAttribute('data-theme', theme);
    themeBtn.setAttribute('aria-pressed', theme==='light');
    themeBtn.textContent = theme==='light' ? '‚òÄÔ∏è Light' : 'üåô Dark';
    // IMPORTANT: do NOT touch charts here; they might not exist yet.
  }
  themeBtn.addEventListener('click', ()=>{
    const next = root.getAttribute('data-theme')==='light' ? 'dark' : 'light';
    localStorage.setItem('theme', next);
    applyTheme(next);
    // Charts exist by now => safe palette update
    updateChartPalettes();
  });
  applyTheme(getSavedTheme());

  /* ---------- Nav / interactions ---------- */
  document.querySelectorAll('a[href^="#"]').forEach(a=>{
    a.addEventListener('click', e=>{
      const id=a.getAttribute('href').slice(1);
      const el=document.getElementById(id);
      if(el){ e.preventDefault(); el.scrollIntoView({behavior:'smooth'}); closeMenu(); }
    });
  });
  const ham=document.querySelector('.hamburger');
  const menu=document.getElementById('mobileMenu');
  function closeMenu(){ menu.style.display='none'; ham.setAttribute('aria-expanded','false'); menu.setAttribute('aria-hidden','true'); }
  ham.addEventListener('click', ()=>{
    const open = menu.style.display==='block';
    if(open){ closeMenu(); } else { menu.style.display='block'; ham.setAttribute('aria-expanded','true'); menu.setAttribute('aria-hidden','false'); }
  });
  document.addEventListener('click', (e)=>{ if(!menu.contains(e.target) && !ham.contains(e.target)) closeMenu(); });
  document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeMenu(); });

  // Subtle motion
  const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  if(!prefersReduced){
    document.querySelectorAll('.card, .kpi').forEach(el=>{
      el.addEventListener('mousemove', (e)=>{
        const r=el.getBoundingClientRect(), x=e.clientX - r.left, y=e.clientY - r.top;
        const rx=(y/r.height - .5)*2, ry=(x/r.width - .5)*-2;
        el.style.transform=`rotateX(${rx}deg) rotateY(${ry}deg) translateY(-2px)`;
      });
      el.addEventListener('mouseleave', ()=>{ el.style.transform='translateY(-2px)'; });
      el.addEventListener('mouseenter', ()=>{ el.style.transition='transform .15s ease'; });
    });
  }

  /* ---------- Data (illustrative for XYZ) ---------- */
  const scenarios = {
    xyz_saas: {
      mix: { labels:['EIC Grant','EIC Equity','NEOTEC/CDTI','ENISA/Public','Bank/Alt Credit','RBF','Private VC'], values:[16,12,10,12,12,18,20] },
      roi: { labels:['FP&A/Forecast','Cost Control','Tax & Incentives','Pricing/Packaging','Working Capital'], values:[27,20,17,18,18] },
      runway: { labels:['Base','TSCFO Plan'], values:[12,20] }
    },
    xyz_deep: {
      mix: { labels:['EIC Grant','EIC Equity','NEOTEC/CDTI','ENISA/Public','Bank/Alt Credit','RBF','Private VC'], values:[28,18,12,8,8,2,24] },
      roi: { labels:['FP&A/Forecast','Cost Control','Tax & Incentives','Pricing/Packaging','Working Capital'], values:[24,18,22,14,22] },
      runway: { labels:['Base','TSCFO Plan'], values:[12,22] }
    },
    xyz_mix: {
      mix: { labels:['EIC Grant','EIC Equity','NEOTEC/CDTI','ENISA/Public','Bank/Alt Credit','RBF','Private VC'], values:[18,14,10,10,14,14,20] },
      roi: { labels:['FP&A/Forecast','Cost Control','Tax & Incentives','Pricing/Packaging','Working Capital'], values:[25,20,19,16,20] },
      runway: { labels:['Base','TSCFO Plan'], values:[12,18] }
    }
  };

  /* ---------- Chart palette by theme ---------- */
  function palette(){
    const theme = root.getAttribute('data-theme') || 'dark';
    if(theme==='light'){
      return { label:'#0b0e13', axis:'rgba(20,30,50,.75)', grid:'rgba(0,0,0,.08)', guide:'rgba(58,120,255,.85)' };
    }
    return { label:'#e9eefb', axis:'rgba(183,196,227,.7)', grid:'rgba(70,86,130,.25)', guide:'rgba(106,162,255,.9)' };
  }

  /* ---------- Custom plugins for Runway chart ---------- */
  const runwayGuide = {
    id:'runwayGuide',
    afterDraw(chart, args, opts){
      const {ctx, chartArea, scales} = chart;
      if(!scales?.x) return;
      const x = scales.x.getPixelForValue(opts.target ?? 18);
      ctx.save();
      ctx.setLineDash([6,6]);
      ctx.lineWidth = 2;
      ctx.strokeStyle = opts.color;
      ctx.beginPath();
      ctx.moveTo(x, chartArea.top);
      ctx.lineTo(x, chartArea.bottom);
      ctx.stroke();
      ctx.setLineDash([]);
      ctx.fillStyle = opts.color;
      ctx.font = '12px Inter, system-ui, sans-serif';
      ctx.fillText(`${opts.label ?? '18 mo target'}`, x + 6, chartArea.top + 12);
      ctx.restore();
    }
  };
  const valueLabels = {
    id:'valueLabels',
    afterDatasetsDraw(chart){
      if(chart.canvas.id !== 'runwayChart') return;
      const {ctx, chartArea} = chart;
      ctx.save();
      ctx.font = '12px Inter, system-ui, sans-serif';
      ctx.fillStyle = palette().label;
      const meta = chart.getDatasetMeta(0);
      meta.data.forEach((bar, i)=>{
        const val = chart.data.datasets[0].data[i];
        const text = `${val} mo`;
        const tw = ctx.measureText(text).width;
        let x = bar.x + 8;
        const y = bar.y + 4;
        if(x + tw > chartArea.right - 4) x = bar.x - tw - 8;
        ctx.fillText(text, x, y);
      });
      ctx.restore();
    }
  };
  Chart.register(runwayGuide, valueLabels);

  /* ---------- Charts ---------- */
  const axisColor=()=>palette().axis, gridColor=()=>palette().grid, labelColor=()=>palette().label;

  const ctxMix=document.getElementById('mixChart').getContext('2d');
  const ctxRoi=document.getElementById('roiChart').getContext('2d');
  const ctxRun=document.getElementById('runwayChart').getContext('2d');

  function draw(kind='xyz_saas'){
    const d = scenarios[kind];

    if(mixChart) mixChart.destroy();
    if(roiChart) roiChart.destroy();
    if(runwayChart) runwayChart.destroy();

    mixChart = new Chart(ctxMix, {
      type:'bar',
      data:{ labels:d.mix.labels, datasets:[{ label:'Funding Mix (%)', data:d.mix.values }] },
      options:{
        responsive:true, animation:{ duration:600 },
        plugins:{ legend:{ labels:{ color:labelColor() } }, tooltip:{ enabled:true } },
        scales:{ x:{ ticks:{ color:axisColor() }, grid:{ color:gridColor() } },
                 y:{ ticks:{ color:axisColor() }, grid:{ color:gridColor() }, suggestedMax:35 } }
      }
    });

    roiChart = new Chart(ctxRoi, {
      type:'doughnut',
      data:{ labels:d.roi.labels, datasets:[{ label:'ROI Contribution', data:d.roi.values }] },
      options:{
        responsive:true, animation:{ duration:600 },
        plugins:{ legend:{ labels:{ color:labelColor() } }, tooltip:{ enabled:true } },
        cutout:'55%'
      }
    });

    runwayChart = new Chart(ctxRun, {
      type:'bar',
      data:{ labels:d.runway.labels, datasets:[{ label:'Runway (months)', data:d.runway.values }] },
      options:{
        indexAxis:'y',
        responsive:true, animation:{ duration:600 },
        plugins:{
          legend:{ labels:{ color:labelColor() } },
          tooltip:{ enabled:true },
          runwayGuide:{ target:18, color:palette().guide, label:'18 mo target' }
        },
        scales:{
          y:{ ticks:{ color:axisColor() }, grid:{ color:gridColor() } },
          x:{ ticks:{ color:axisColor() }, grid:{ color:gridColor() }, suggestedMax:24, beginAtZero:true }
        }
      }
    });
  }

  /* ---------- Palette updater (safe) ---------- */
  function updateChartPalettes(){
    // Guard: if charts not ready, just return
    if(!mixChart || !roiChart || !runwayChart) return;
    const pal = palette();

    // Mix
    mixChart.options.plugins.legend.labels.color = pal.label;
    mixChart.options.scales.x.ticks.color = pal.axis;
    mixChart.options.scales.x.grid.color  = pal.grid;
    mixChart.options.scales.y.ticks.color = pal.axis;
    mixChart.options.scales.y.grid.color  = pal.grid;
    mixChart.update();

    // ROI
    roiChart.options.plugins.legend.labels.color = pal.label;
    roiChart.update();

    // Runway
    runwayChart.options.plugins.legend.labels.color = pal.label;
    runwayChart.options.plugins.runwayGuide.color = pal.guide;
    runwayChart.options.scales.y.ticks.color = pal.axis;
    runwayChart.options.scales.y.grid.color  = pal.grid;
    runwayChart.options.scales.x.ticks.color = pal.axis;
    runwayChart.options.scales.x.grid.color  = pal.grid;
    runwayChart.update();
  }

  // Initial draw + palette sync
  draw('xyz_saas');
  updateChartPalettes();

  // Scenario switcher
  document.getElementById('dataset').addEventListener('change', e=>{
    draw(e.target.value);
    updateChartPalettes();
  });
</script>
</body>
</html>
